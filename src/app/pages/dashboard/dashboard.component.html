<!-- ✅ VERSÃO CORRIGIDA COMPLETA -->
<div class="dashboard-container">

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Carregando seu dashboard...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="hasError" class="error-container">
    <mat-icon class="error-icon">error_outline</mat-icon>
    <h2 class="error-title">Ops! Algo deu errado</h2>
    <p class="error-message">{{ errorMessage }}</p>
    <button class="retry-button" (click)="reloadData()">
      <mat-icon>refresh</mat-icon>
      Tentar Novamente
    </button>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoading && !hasError">
    
    <!-- ✅ HEADER PREMIUM -->
    <header class="dashboard-header">
      <h1 class="dashboard-title">{{ appInfo.name }}</h1>
      <p class="dashboard-subtitle">{{ appInfo.description }}</p>

      <!-- ✅ STATS CORRIGIDAS -->
      <div class="stats-overview">
        <div class="stat-item">
          <span class="stat-number" [attr.data-number]="areas.length">
            {{ areas.length }}
          </span>
          <span class="stat-label">Áreas</span>
        </div>
        <div class="stat-item">
          <span class="stat-number" [attr.data-number]="getAvailableAreasCount()">
            {{ getAvailableAreasCount() }}
          </span>
          <span class="stat-label">Disponíveis</span>
        </div>
      </div>
    </header>

    <!-- ✅ QUICK ACTIONS PREMIUM -->
    <section class="quick-actions-section">
      <h2 class="section-title">Ações Rápidas</h2>
      <div class="quick-actions-grid">
        
        <div class="quick-action-card" (click)="startRandomQuiz()">
          <div class="action-icon">
            <mat-icon>shuffle</mat-icon>
          </div>
          <h3 class="action-title">Quiz Aleatório</h3>
          <p class="action-description">Questões de todas as áreas disponíveis</p>
        </div>
        
        <div class="quick-action-card" (click)="viewProgress()">
          <div class="action-icon">
            <mat-icon>trending_up</mat-icon>
          </div>
          <h3 class="action-title">Meu Progresso</h3>
          <p class="action-description">Acompanhe sua evolução detalhada</p>
        </div>
        
        <div class="quick-action-card" (click)="viewFavorites()">
          <div class="action-icon">
            <mat-icon>favorite</mat-icon>
          </div>
          <h3 class="action-title">Favoritos</h3>
          <p class="action-description">Suas questões marcadas como favoritas</p>
        </div>
        
        <!-- ✅ UPGRADE CARD PREMIUM -->
        <div class="quick-action-card upgrade-card" (click)="navigateToUpgrade()">
          <div class="action-icon">
            <mat-icon class="crown-icon">emoji_events</mat-icon>
          </div>
          <h3 class="action-title">Upgrade Premium</h3>
          <p class="action-description">Acesso ilimitado a todas as funcionalidades</p>
          <div class="upgrade-badge">
            <div class="premium-chip">
              <mat-icon>stars</mat-icon>
              7 dias grátis
            </div>
          </div>
        </div>
        
      </div>
    </section>

    <!-- ✅ STUDY AREAS - CARDS PREMIUM -->
    <section class="study-areas-section">
      <h2 class="section-title">Áreas de Estudo</h2>
      
      <div class="areas-grid">
        <div 
          *ngFor="let area of areas; trackBy: trackByAreaName" 
          class="area-card"
          [class.unavailable]="!area.available"
          (click)="navigateToArea(area.name)"
        >
          
          <!-- ✅ AREA HEADER -->
          <div class="area-header">
            <div class="area-icon">
              {{ getAreaIcon(area.name) }}
            </div>
            <div class="area-info">
              <h3>{{ area.displayName }}</h3>
            </div>
          </div>

          <!-- ✅ DESCRIPTION -->
          <p class="area-description">{{ area.description }}</p>
          
          <!-- ✅ SUBJECTS PREVIEW -->
          <p class="subjects-preview" *ngIf="area.subjects && area.subjects.length > 0">
            {{ area.subjects.slice(0, 3).join(', ') }}
            <span *ngIf="area.subjects.length > 3">...</span>
          </p>

        </div>
      </div>
    </section>

  </div>
</div>