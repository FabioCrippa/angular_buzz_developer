<!--
  Container principal do quiz. Utiliza uma classe para facilitar a estiliza√ß√£o e garantir responsividade.
-->
<div class="container__quizz">
    <div class="logo__quizz">
        <!-- Imagem do logo do projeto -->
        <img src="assets/img/logo.png" alt="logo" srcset="">
        <!-- T√≠tulo principal -->
        <h1>DESENVOLVEDOR WEB</h1>
        <!-- Controles de √°udio para m√∫sica de fundo -->
        <div class="audio-controls">
            <!-- Bot√£o para tocar m√∫sica de fundo -->
            <button (click)="playMusic()">Tocar M√∫sica</button>
            <!-- Bot√£o para pausar m√∫sica de fundo -->
            <button (click)="pauseMusic()">Pausar M√∫sica</button>
        </div>
        <!-- T√≠tulo din√¢mico do quiz (pode ser o nome da categoria) -->
        <h3>{{ title }}</h3>
        
        <!-- ‚úÖ BARRA DE PROGRESSO -->
        <div class="progress-container" *ngIf="!finished">
            <div class="progress-bar">
                <div class="progress-fill" [style.width.%]="progress"></div>
            </div>
            <p>Quest√£o {{ questionIndex + 1 }} de {{ questions.length }} ({{ progress }}%)</p>
        </div>
    </div>

    <!--
      Se√ß√£o para player de √°udio do YouTube (caso usado).
    -->
    <div class="youtube-audio">
        <div id="youtube-player"></div>
    </div>

    <!--
      ‚úÖ EXIBE O QUIZ - CORRIGIDO
    -->
    <div *ngIf="!finished && currentQuestion">
        <!--
          ‚úÖ PERGUNTA ATUAL - CORRIGIDA
        -->
        <div class="question-container">
            <h2>{{ currentQuestion.question }}</h2>
            <!-- Bot√£o para ler a pergunta em voz alta -->
            <button 
                (click)="readText(currentQuestion.question)" 
                class="listen-btn"
                title="Ouvir Pergunta"
                aria-label="Ouvir Pergunta"
            >üîä</button>
        </div>

        <!--
          ‚úÖ OP√á√ïES DE RESPOSTA - CORRIGIDAS
        -->
        <div class="options-container">
            <div *ngFor="let option of currentQuestion.options" class="option-wrapper">
                <button 
                    class="option-btn"
                    [ngClass]="getOptionClass(option.alias)"
                    (click)="selectAnswer(option.alias)"
                    [disabled]="showFeedback"
                    [attr.aria-label]="'Escolher resposta ' + option.name"
                >
                    {{ option.name }}
                </button>
            </div>
        </div>

        <!--
          ‚úÖ FEEDBACK E EXPLICA√á√ÉO
        -->
        <div *ngIf="showFeedback" class="feedback-container">
            <!-- Mostrar se acertou ou errou -->
            <div class="feedback-result">
                <h3 *ngIf="isCorrectAnswer(selectedAnswer)" class="correct-feedback">
                    ‚úÖ Correto!
                </h3>
                <h3 *ngIf="!isCorrectAnswer(selectedAnswer)" class="incorrect-feedback">
                    ‚ùå Resposta incorreta
                </h3>
            </div>

            <!-- Explica√ß√£o da resposta -->
            <div *ngIf="currentQuestion.explanation" class="explanation">
                <h4>üí° Explica√ß√£o:</h4>
                <p>{{ currentQuestion.explanation }}</p>
            </div>

            <!-- ‚úÖ DICA DE ENTREVISTA (NOVA FUNCIONALIDADE!) -->
            <div *ngIf="currentQuestion.interviewTip" class="interview-tip">
                <h4>üéØ Dica para Entrevista:</h4>
                <p class="tip-content">{{ currentQuestion.interviewTip }}</p>
                <button 
                    (click)="readText(currentQuestion.interviewTip)" 
                    class="listen-tip-btn"
                    title="Ouvir Dica"
                >
                    üîä Ouvir Dica
                </button>
            </div>

            <!--
              ‚úÖ BOT√ÉO AVAN√áAR - CORRIGIDO
            -->
            <button 
                class="next-btn" 
                (click)="nextQuestion()"
            >
                {{ questionIndex === questions.length - 1 ? 'Finalizar Quiz' : 'Pr√≥xima Quest√£o' }}
            </button>
        </div>

        <!--
          Bot√£o para finalizar o quiz a qualquer momento
        -->
        <button class="finalize-btn" (click)="finishQuiz()" *ngIf="!showFeedback">
            Finalizar Agora
        </button>
    </div>

    <!--
      ‚úÖ RESULTADO FINAL - MELHORADO
    -->
    <div *ngIf="finished && quizResult" class="results-container">
        <h2>üéâ Quiz Finalizado!</h2>
        
        <!-- Pontua√ß√£o Geral -->
        <div class="score-summary">
            <div class="score-circle">
                <span class="percentage">{{ quizResult.percentage }}%</span>
            </div>
            <div class="score-details">
                <p><strong>‚úÖ Acertos:</strong> {{ quizResult.score }}</p>
                <p><strong>‚ùå Erros:</strong> {{ quizResult.total - quizResult.score }}</p>
                <p><strong>üìä Total:</strong> {{ quizResult.total }} quest√µes</p>
            </div>
        </div>

        <!-- ‚úÖ RESULTADOS POR CATEGORIA -->
        <div class="category-results" *ngIf="quizResult.categoryResults.length > 0">
            <h3>üìä Desempenho por Categoria:</h3>
            <div class="category-grid">
                <div 
                    *ngFor="let categoryResult of quizResult.categoryResults" 
                    class="category-card"
                >
                    <h4>{{ getCategoryTitle(categoryResult.category) }}</h4>
                    <div class="category-stats">
                        <span class="category-percentage">{{ categoryResult.percentage }}%</span>
                        <span class="category-details">
                            {{ categoryResult.correct }}/{{ categoryResult.total }}
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- A√ß√µes -->
        <div class="result-actions">
            <button class="restart-btn" (click)="restartQuiz()">
                üîÑ Jogar Novamente
            </button>
            <button class="home-btn" (click)="goHome()">
                üè† Voltar ao In√≠cio
            </button>
        </div>
    </div>

    <!-- ‚úÖ LOADING STATE -->
    <div *ngIf="!finished && !currentQuestion" class="loading-container">
        <h2>Carregando quiz...</h2>
        <div class="loading-spinner"></div>
    </div>
</div>

